{"openapi":"3.0.1","info":{"title":"Document Generation Service API","description":"Document Generation and Distribution System using JasperReports","contact":{"name":"Muban Team","url":"https://muban.me","email":"contact@muban.me"},"license":{"name":"S-MIT (Selective MIT)"},"version":"1.5.1"},"servers":[{"url":"http://localhost:8080","description":"Development server"},{"url":"https://api.muban.me","description":"Production server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Audit Dashboard","description":"Real-time audit dashboards and analytics"},{"name":"Admin Operations","description":"Administrative operations for system maintenance (ROLE_ADMIN)"},{"name":"Configuration","description":"System configuration management APIs"},{"name":"Audit","description":"Audit logging and security monitoring"},{"name":"Templates","description":"Document template management and generation"}],"paths":{"/api/v1/templates/{id}/generate/{format}":{"post":{"tags":["Templates"],"summary":"Generate document","description":"Generate document in specified format with native JSON type support, parameter validation, and optional JSON data source","operationId":"generateDocument","parameters":[{"name":"id","in":"path","description":"Template ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"format","in":"path","description":"Output format (pdf, xlsx, docx, rtf, html)","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateRequestDto"}}},"required":true},"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"400":{"description":"Invalid parameters or validation failed","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"200":{"description":"Document generated successfully","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/v1/templates/upload":{"post":{"tags":["Templates"],"summary":"Upload template","description":"Upload new document template (ZIP format, manager role required)","operationId":"uploadTemplate","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UploadTemplateRequestDto"}}}},"responses":{"200":{"description":"Template successfully uploaded","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"400":{"description":"Invalid request or file validation failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"403":{"description":"Forbidden - manager role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"413":{"description":"File too large (max 50MB)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}}}}},"/api/v1/audit/cleanup":{"post":{"tags":["Audit"],"summary":"Trigger manual audit log cleanup","description":"Manually initiates cleanup of old audit logs based on retention policy. Preserves CRITICAL and HIGH severity events. Restricted to administrators.","operationId":"cleanupOldLogs","responses":{"200":{"description":"Cleanup initiated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"403":{"description":"Forbidden - Admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}}}}},"/api/v1/admin/templates/{id}/verify-integrity":{"post":{"tags":["Admin Operations"],"summary":"Verify template integrity","description":"Checks if template file has been modified or tampered with by comparing current HMAC digest with stored digest. Returns 409 Conflict if integrity check fails. (Admin role required)","operationId":"verifyIntegrity","parameters":[{"name":"id","in":"path","description":"UUID of the template","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Integrity verified successfully - file is unchanged","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDto"}}}},"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"422":{"description":"Integrity violation - file may have been tampered with","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"500":{"description":"Failed to verify integrity - IO error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/admin/templates/{id}/regenerate-digest":{"post":{"tags":["Admin Operations"],"summary":"Regenerate integrity digest for a template","description":"Recalculates and updates the HMAC-SHA256 digest for template verification. Use this after legitimate template updates or when a digest file is corrupted. (Admin role required)","operationId":"regenerateDigest","parameters":[{"name":"id","in":"path","description":"UUID of the template","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Digest regenerated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDto"}}}},"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"500":{"description":"Failed to regenerate digest - IO error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/admin/templates/regenerate-all-digests":{"post":{"tags":["Admin Operations"],"summary":"Regenerate integrity digests for all templates","description":"Recalculates and updates HMAC-SHA256 digests for all templates in the system. Use this operation after changing the file.integrity.secret-key configuration or when migrating templates. Returns a map with template IDs as keys and status ('SUCCESS' or error message) as values. Returns 200 for all success, 500 for all failures, or 207 Multi-Status for partial success. (Admin role required)","operationId":"regenerateAllDigests","responses":{"207":{"description":"Multi-Status - some digests regenerated successfully, some failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDto"}}}},"200":{"description":"All digests regenerated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDto"}}}},"500":{"description":"All digest regenerations failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDto"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringString"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringString"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/templates":{"get":{"tags":["Templates"],"summary":"List templates","description":"Retrieve paginated list of document templates with optional search","operationId":"getTemplates","parameters":[{"name":"page","in":"query","description":"Page number for pagination","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1},{"name":"size","in":"query","description":"Number of items per page","required":false,"schema":{"type":"integer","format":"int32","default":20},"example":20},{"name":"search","in":"query","description":"Search term to filter templates","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Templates retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedTemplatesDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedTemplatesDto"}}}}}}},"/api/v1/templates/{id}":{"get":{"tags":["Templates"],"summary":"Get template details","description":"Retrieve metadata for a specific document template","operationId":"getTemplate","parameters":[{"name":"id","in":"path","description":"Template ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"200":{"description":"Template found successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoTemplateDto"}}}}}},"delete":{"tags":["Templates"],"summary":"Delete template","description":"Remove a document template from the system (Manager role required)","operationId":"deleteTemplate","parameters":[{"name":"id","in":"path","description":"Template ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoVoid"}}}},"403":{"description":"Forbidden - manager role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoVoid"}}}},"204":{"description":"Template deleted successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoVoid"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoVoid"}}}}}}},"/api/v1/templates/{id}/params":{"get":{"tags":["Templates"],"summary":"Get template parameters","description":"Retrieve required parameters for generating the document template","operationId":"getTemplateParameters","parameters":[{"name":"id","in":"path","description":"Template ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateParameterDto"}}}},"200":{"description":"Parameters retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateParameterDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateParameterDto"}}}}}}},"/api/v1/templates/{id}/fields":{"get":{"tags":["Templates"],"summary":"Get template fields","description":"Retrieve stored field definitions for a specific document template","operationId":"getTemplateFields","parameters":[{"name":"id","in":"path","description":"Template ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateFieldDto"}}}},"200":{"description":"Fields retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateFieldDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListTemplateFieldDto"}}}}}}},"/api/v1/templates/{id}/download":{"get":{"tags":["Templates"],"summary":"Download template","description":"Download a document template by its UUID. Returns a ZIP file containing the template. Accessible by all authenticated users.","operationId":"downloadTemplate","parameters":[{"name":"id","in":"path","description":"UUID of the template to download","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Template not found","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"200":{"description":"Template downloaded successfully","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/v1/templates/icc-profiles":{"get":{"tags":["Templates"],"summary":"Get available ICC profiles","description":"Retrieve list of available ICC color profiles for PDF export. These profiles can be used with the pdfExportOptions parameter when generating PDF documents.","operationId":"getAvailableIccProfiles","responses":{"200":{"description":"ICC profiles retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}}}}},"/api/v1/templates/fonts":{"get":{"tags":["Templates"],"summary":"Get available fonts","description":"Retrieve list of available font families for document generation. These fonts can be used in JRXML templates with fontName attribute. Includes information about available font faces (normal, bold, italic, boldItalic) and PDF embedding status.","operationId":"getAvailableFonts","responses":{"200":{"description":"Font families retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListFontFamilyDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListFontFamilyDto"}}}}}}},"/api/v1/config":{"get":{"tags":["Configuration"],"summary":"Get all configuration settings","description":"Retrieve all system configuration settings. Returns comprehensive configuration data including JasperReports settings, system parameters, and feature flags.","operationId":"getAllConfig","responses":{"403":{"description":"Access denied - requires ADMIN role","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"200":{"description":"Configuration retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}},"/api/v1/audit/users/{userId}":{"get":{"tags":["Audit"],"summary":"Get audit logs for specific user","description":"Retrieve paginated audit logs for a specific user by their UUID. Returns all audit events associated with the user within the specified time period. Admin role required.","operationId":"getUserActivity","parameters":[{"name":"userId","in":"path","description":"UUID of the user to retrieve audit logs for","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":50}},{"name":"startTime","in":"query","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"User audit logs retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}}}}},"/api/v1/audit/statistics":{"get":{"tags":["Audit"],"summary":"Get comprehensive audit statistics","description":"Retrieve detailed audit statistics including event counts, user activity (top 20), client activity (top 20 OAuth2 clients), daily trends, IP address analysis (top 10), unique metrics, and performance data for a specified time period. Admin role required.","operationId":"getAuditStatistics","parameters":[{"name":"startTime","in":"query","description":"Start time for statistics period","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","description":"End time for statistics period","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"Audit statistics retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditStatisticsDto"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditStatisticsDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditStatisticsDto"}}}}}}},"/api/v1/audit/severity-levels":{"get":{"tags":["Audit"],"summary":"Get available audit severity levels","description":"Retrieve the list of all available audit log severity levels (LOW, MEDIUM, HIGH, CRITICAL). Use these values when filtering audit logs by severity.","operationId":"getSeverityLevels","responses":{"200":{"description":"Severity levels retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}}}}},"/api/v1/audit/security":{"get":{"tags":["Audit"],"summary":"Get security events","description":"Retrieve high-priority security-related audit logs (Admin role required)","operationId":"getSecurityEvents","parameters":[{"name":"page","in":"query","description":"Page number for pagination","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1},{"name":"size","in":"query","description":"Number of items per page","required":false,"schema":{"type":"integer","format":"int32","default":50},"example":50},{"name":"startTime","in":"query","description":"Start time for filtering security events","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","description":"End time for filtering security events","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"Security events retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}}}}},"/api/v1/audit/logs":{"get":{"tags":["Audit"],"summary":"Get audit logs","description":"Retrieve paginated audit logs with optional filtering (Admin role required)","operationId":"getAuditLogs","parameters":[{"name":"page","in":"query","description":"Page number for pagination","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1},{"name":"size","in":"query","description":"Number of items per page","required":false,"schema":{"type":"integer","format":"int32","default":50},"example":50},{"name":"eventType","in":"query","description":"Filter by event type","required":false,"schema":{"type":"string","enum":["LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","TOKEN_REFRESH","TOKEN_EXPIRED","UNAUTHORIZED_ACCESS","PERMISSION_DENIED","USER_CREATED","USER_UPDATED","USER_DELETED","USER_ENABLED","USER_DISABLED","USER_ROLES_UPDATED","PASSWORD_CHANGED","PROFILE_UPDATED","USER_VIEWED","USERS_LISTED","TEMPLATE_CREATED","TEMPLATE_UPDATED","TEMPLATE_DELETED","TEMPLATE_VIEWED","TEMPLATE_LISTED","TEMPLATE_DOWNLOADED","TEMPLATE_GENERATED","TEMPLATE_PARAMS_ACCESSED","TEMPLATE_FIELDS_ACCESSED","INTEGRITY_DIGEST_REGENERATED","INTEGRITY_CHECK_PERFORMED","INTEGRITY_CHECK_PASSED","INTEGRITY_CHECK_FAILED","INTEGRITY_BULK_REGENERATION","AUDIT_LOG_VIEWED","AUDIT_LOGS_LISTED","SYSTEM_STARTUP","SYSTEM_SHUTDOWN","CONFIG_CHANGED","CONFIG_VIEWED","SUSPICIOUS_ACTIVITY","RATE_LIMIT_EXCEEDED","INJECTION_ATTEMPT","BRUTE_FORCE_ATTEMPT","DATA_EXPORT","DATA_IMPORT","BULK_OPERATION","APPLICATION_ERROR","DATABASE_ERROR","EXTERNAL_SERVICE_ERROR","API_REQUEST","API_RESPONSE","API_ERROR"]}},{"name":"severity","in":"query","description":"Filter by severity level","required":false,"schema":{"type":"string","enum":["LOW","MEDIUM","HIGH","CRITICAL"]}},{"name":"userId","in":"query","description":"Filter by user ID","required":false,"schema":{"type":"string","format":"uuid"}},{"name":"ipAddress","in":"query","description":"Filter by IP address","required":false,"schema":{"type":"string"}},{"name":"startTime","in":"query","description":"Start time for filtering logs","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","description":"End time for filtering logs","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"success","in":"query","description":"Filter by operation success status","required":false,"schema":{"type":"boolean"}}],"responses":{"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"200":{"description":"Audit logs retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}}}}},"/api/v1/audit/logs/{id}":{"get":{"tags":["Audit"],"summary":"Get specific audit log","description":"Retrieve details of a specific audit log entry by ID (Admin role required)","operationId":"getAuditLog","parameters":[{"name":"id","in":"path","description":"Audit log ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Audit log retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditLogDto"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditLogDto"}}}},"404":{"description":"Audit log not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditLogDto"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoAuditLogDto"}}}}}}},"/api/v1/audit/health":{"get":{"tags":["Audit"],"summary":"Audit system health check","description":"Checks if the audit system is operational and responding. Available to all authenticated users.","operationId":"getAuditHealth","responses":{"200":{"description":"Audit system is operational","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoString"}}}}}}},"/api/v1/audit/failures":{"get":{"tags":["Audit"],"summary":"Get failed operations audit logs","description":"Retrieves paginated list of audit logs for failed operations within specified time range. Restricted to administrators.","operationId":"getFailedOperations","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":50}},{"name":"startTime","in":"query","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"403":{"description":"Forbidden - Admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}},"200":{"description":"Successfully retrieved failed operations logs","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoPaginatedAuditLogsDto"}}}}}}},"/api/v1/audit/event-types":{"get":{"tags":["Audit"],"summary":"Get available audit event types","description":"Returns a list of all available audit event types that can be used for filtering audit logs. Restricted to administrators.","operationId":"getEventTypes","responses":{"403":{"description":"Forbidden - Admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}},"200":{"description":"Successfully retrieved event types","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoListString"}}}}}}},"/api/v1/audit/dashboard/user-patterns":{"get":{"tags":["Audit Dashboard"],"summary":"Get user activity patterns dashboard","description":"Analyze user behavior patterns including user creations, role assignments, login activities, and access patterns. Includes comprehensive statistics for identifying unusual user behavior and access trends. Default period is last 7 days. Admin role required.","operationId":"getUserActivityPatterns","parameters":[{"name":"startTime","in":"query","description":"Start time for user pattern analysis (default: 7 days ago)","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","description":"End time for user pattern analysis (default: now)","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"User activity patterns retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}},"/api/v1/audit/dashboard/system-health":{"get":{"tags":["Audit Dashboard"],"summary":"Get system health metrics dashboard","description":"Retrieve system health metrics from audit logs including application errors, database errors, external service errors, authentication issues, and validation failures. Analyzes last 24 hours of system activity for health monitoring and troubleshooting. Admin role required.","operationId":"getSystemHealthMetrics","responses":{"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"200":{"description":"System health metrics retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}},"/api/v1/audit/dashboard/security-threats":{"get":{"tags":["Audit Dashboard"],"summary":"Get security threats summary","description":"Retrieve security threat summary for the last 24 hours (Admin role required)","operationId":"getSecurityThreats","responses":{"200":{"description":"Security threats summary retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}},"/api/v1/audit/dashboard/overview":{"get":{"tags":["Audit Dashboard"],"summary":"Get audit dashboard overview","description":"Retrieve real-time audit dashboard overview with statistics and recent events (Admin role required)","operationId":"getDashboardOverview","responses":{"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"200":{"description":"Dashboard overview retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}},"/api/v1/audit/dashboard/compliance":{"get":{"tags":["Audit Dashboard"],"summary":"Get compliance activity dashboard","description":"Retrieve compliance-related audit data including critical operations such as user deletions, role changes, access grants/revocations, configuration changes, and authentication bypass attempts. Provides comprehensive compliance tracking for regulatory requirements. Admin role required.","operationId":"getComplianceActivity","parameters":[{"name":"startTime","in":"query","description":"Start time for compliance analysis period","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"endTime","in":"query","description":"End time for compliance analysis period","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"Compliance dashboard data retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"403":{"description":"Forbidden - admin role required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseDtoMapStringObject"}}}}}}}},"components":{"schemas":{"GenerateRequestDto":{"required":["parameters"],"type":"object","properties":{"parameters":{"type":"array","description":"List of parameter values for document generation","example":[{"name":"reportTitle","value":"Monthly Sales Report"},{"name":"totalAmount","value":15750.25}],"items":{"$ref":"#/components/schemas/ParameterValueDto"}},"filename":{"maxLength":100,"type":"string","description":"Optional client-specified filename for the generated document. Automatically sanitized and extension added based on format","example":"Monthly_Sales_Report_October_2025"},"data":{"type":"object","additionalProperties":{"type":"object","description":"Optional JSON data source for complex reports. Can contain arrays, objects, or any valid JSON structure","example":{"items":[{"productName":"Widget A","quantity":100,"unitPrice":25.5}]}},"description":"Optional JSON data source for complex reports. Can contain arrays, objects, or any valid JSON structure","example":{"items":[{"productName":"Widget A","quantity":100,"unitPrice":25.5}]}},"documentLocale":{"pattern":"^[a-z]{2}(_[A-Z]{2}(_[a-zA-Z0-9]+)?)?$","type":"string","description":"Optional locale for internationalization and formatting (e.g., 'pl_PL', 'en_US'). Affects number, date, and currency formatting","example":"pl_PL"},"pdfExportOptions":{"$ref":"#/components/schemas/PdfExportOptionsDto"},"htmlExportOptions":{"$ref":"#/components/schemas/HtmlExportOptionsDto"},"ignorePagination":{"type":"boolean","description":"Optional pagination control. When true, ignores pagination and renders as continuous content","example":false,"default":false}},"description":"Document generation request with parameters and optional data"},"HtmlExportOptionsDto":{"type":"object","properties":{"embedFonts":{"type":"boolean","description":"Whether to embed fonts in the HTML output. Set to false for email usage to reduce file size. When disabled, HTML will rely on system/web fonts.","example":true,"default":true},"embedImages":{"type":"boolean","description":"Whether to embed images directly in the HTML. When true, images are stored as separate files in the assets directory. When false, images may be base64-encoded inline (if supported).","example":true,"default":true},"useWebSafeFonts":{"type":"boolean","description":"Whether to use web-safe font fallbacks (Arial, Times New Roman, etc.) instead of custom fonts. Recommended for email usage.","example":false,"default":false},"removeEmptySpace":{"type":"boolean","description":"Whether to remove empty space between rows in tables to create more compact output.","example":false,"default":false},"wrapBreakWord":{"type":"boolean","description":"Whether to wrap text at word boundaries to prevent horizontal scrolling.","example":false,"default":false},"ignorePageMargins":{"type":"boolean","description":"Whether to ignore page margins from the report design. Useful for responsive HTML output.","example":false,"default":false}},"description":"HTML-specific export options for controlling output characteristics","example":{"embedFonts":false,"embedImages":true,"useWebSafeFonts":true}},"ParameterValueDto":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"object"}},"description":"List of parameter values for document generation","example":[{"name":"reportTitle","value":"Monthly Sales Report"},{"name":"totalAmount","value":15750.25}]},"PdfExportOptionsDto":{"type":"object","properties":{"pdfaConformance":{"type":"string","description":"PDF/A conformance level for long-term archival and accessibility. Note: PDF/A and encryption are mutually exclusive.","example":"PDF/A-1b","enum":["PDF/A-1a","PDF/A-1b","PDF/A-2a","PDF/A-2b","PDF/A-3a","PDF/A-3b"]},"iccProfile":{"type":"string","description":"ICC color profile name for CMYK color management in professional printing. Profile files must be available in classpath:icc/","example":"pso-coated-v3","enum":["pso-coated-v3","pso-uncoated-v3","coated-fogra39","web-coated-fogra28","uncoated-fogra29","us-web-coated-swop-v2"]},"userPassword":{"type":"string","description":"Password required to open and view the PDF document. Leave empty to allow opening without password.","example":"secretPassword123"},"ownerPassword":{"type":"string","description":"Password required to change security settings or permissions. Recommended to be different from userPassword.","example":"ownerSecret456"},"canPrint":{"type":"boolean","description":"Allow or deny printing of the document. Default is true (printing allowed).","example":true,"default":true},"canPrintHighQuality":{"type":"boolean","description":"Allow high-quality printing. If false, only low-resolution printing is allowed. Default is true.","example":true,"default":true},"canModify":{"type":"boolean","description":"Allow or deny modification of document content. Default is false (modification not allowed).","example":false,"default":false},"canCopy":{"type":"boolean","description":"Allow or deny copying of text and graphics. Default is true (copying allowed).","example":true,"default":true},"canFillForms":{"type":"boolean","description":"Allow or deny filling in form fields. Default is true (form filling allowed).","example":true,"default":true},"canAnnotate":{"type":"boolean","description":"Allow or deny adding annotations and comments. Default is true (annotations allowed).","example":true,"default":true},"canAssemble":{"type":"boolean","description":"Allow or deny document assembly (inserting, deleting, rotating pages). Default is false.","example":false,"default":false},"encryptionKeyLength":{"type":"integer","description":"Encryption key length in bits. 128 for AES-128 (compatible), 256 for AES-256 (more secure). Default is 128.","format":"int32","example":128,"default":128,"enum":[128,256]}},"description":"PDF-specific export configuration for professional printing, archival, and security purposes","example":{"iccProfile":"pso-coated-v3","pdfaConformance":"PDF/A-1b"}},"UploadTemplateRequestDto":{"required":["author","file","name"],"type":"object","properties":{"name":{"type":"string","description":"Template name","example":"Monthly Report Template"},"metadata":{"type":"string","description":"Template metadata","example":"Financial report template with quarterly data"},"author":{"type":"string","description":"Template author name","example":"John Smith"},"file":{"type":"string","format":"binary"}},"description":"Template upload data"},"ApiErrorDto":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"},"field":{"type":"string"},"details":{"type":"string"}}},"ApiMetaDto":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"correlationId":{"type":"string"},"requestId":{"type":"string"},"status":{"type":"string"}}},"ApiResponseDtoTemplateDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"$ref":"#/components/schemas/TemplateDto"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"TemplateDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"metadata":{"type":"string"},"author":{"type":"string"},"created":{"type":"string","format":"date-time"},"templatePath":{"type":"string"},"fileSize":{"type":"integer","format":"int64"}}},"ApiResponseDtoString":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"string"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"object"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDtoMapStringString":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"object","additionalProperties":{"type":"string"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDtoPaginatedTemplatesDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"$ref":"#/components/schemas/PaginatedTemplatesDto"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"PaginatedTemplatesDto":{"type":"object","properties":{"totalItems":{"type":"integer","format":"int32"},"totalPages":{"type":"integer","format":"int32"},"currentPage":{"type":"integer","format":"int32"},"itemsPerPage":{"type":"integer","format":"int32"},"items":{"type":"array","items":{"$ref":"#/components/schemas/TemplateDto"}}}},"ApiResponseDtoListTemplateParameterDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"array","items":{"$ref":"#/components/schemas/TemplateParameterDto"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"TemplateParameterDto":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string"},"defaultValue":{"type":"string"},"description":{"type":"string"}}},"ApiResponseDtoListTemplateFieldDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"array","items":{"$ref":"#/components/schemas/TemplateFieldDto"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"TemplateFieldDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"type":{"type":"string"},"defaultValue":{"type":"string"},"description":{"type":"string"},"required":{"type":"boolean"},"displayName":{"type":"string"},"collectionName":{"type":"string"},"arrayElement":{"type":"boolean"}}},"ApiResponseDtoListString":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"array","items":{"type":"string"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDtoListFontFamilyDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"array","items":{"$ref":"#/components/schemas/FontFamilyDto"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"FontFamilyDto":{"type":"object","properties":{"name":{"type":"string","description":"Font family name as used in JRXML templates","example":"DejaVu Sans"},"faces":{"type":"array","description":"Available font faces (normal, bold, italic, boldItalic)","example":["normal","bold","italic","boldItalic"],"items":{"type":"string","description":"Available font faces (normal, bold, italic, boldItalic)","example":"[\"normal\",\"bold\",\"italic\",\"boldItalic\"]"}},"pdfEmbedded":{"type":"boolean","description":"Whether the font is embedded in PDF output","example":true}},"description":"Information about an available font family for document generation"},"ApiResponseDtoMapStringObject":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"object","additionalProperties":{"type":"object"}},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDtoPaginatedAuditLogsDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"$ref":"#/components/schemas/PaginatedAuditLogsDto"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"AuditLogDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"timestamp":{"type":"string","format":"date-time"},"eventType":{"type":"string","enum":["LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","TOKEN_REFRESH","TOKEN_EXPIRED","UNAUTHORIZED_ACCESS","PERMISSION_DENIED","USER_CREATED","USER_UPDATED","USER_DELETED","USER_ENABLED","USER_DISABLED","USER_ROLES_UPDATED","PASSWORD_CHANGED","PROFILE_UPDATED","USER_VIEWED","USERS_LISTED","TEMPLATE_CREATED","TEMPLATE_UPDATED","TEMPLATE_DELETED","TEMPLATE_VIEWED","TEMPLATE_LISTED","TEMPLATE_DOWNLOADED","TEMPLATE_GENERATED","TEMPLATE_PARAMS_ACCESSED","TEMPLATE_FIELDS_ACCESSED","INTEGRITY_DIGEST_REGENERATED","INTEGRITY_CHECK_PERFORMED","INTEGRITY_CHECK_PASSED","INTEGRITY_CHECK_FAILED","INTEGRITY_BULK_REGENERATION","AUDIT_LOG_VIEWED","AUDIT_LOGS_LISTED","SYSTEM_STARTUP","SYSTEM_SHUTDOWN","CONFIG_CHANGED","CONFIG_VIEWED","SUSPICIOUS_ACTIVITY","RATE_LIMIT_EXCEEDED","INJECTION_ATTEMPT","BRUTE_FORCE_ATTEMPT","DATA_EXPORT","DATA_IMPORT","BULK_OPERATION","APPLICATION_ERROR","DATABASE_ERROR","EXTERNAL_SERVICE_ERROR","API_REQUEST","API_RESPONSE","API_ERROR"]},"severity":{"type":"string","enum":["LOW","MEDIUM","HIGH","CRITICAL"]},"userId":{"type":"string","format":"uuid"},"username":{"type":"string"},"clientId":{"type":"string"},"sessionId":{"type":"string"},"ipAddress":{"type":"string"},"userAgent":{"type":"string"},"resourceType":{"type":"string"},"resourceId":{"type":"string"},"action":{"type":"string"},"description":{"type":"string"},"requestUrl":{"type":"string"},"httpMethod":{"type":"string"},"requestParams":{"type":"string"},"responseStatus":{"type":"integer","format":"int32"},"executionTimeMs":{"type":"integer","format":"int64"},"success":{"type":"boolean"},"errorMessage":{"type":"string"},"correlationId":{"type":"string"},"metadata":{"type":"object","additionalProperties":{"type":"string"}},"oldValues":{"type":"string"},"newValues":{"type":"string"},"riskScore":{"type":"integer","format":"int32"},"complianceFlags":{"type":"string"}}},"PaginatedAuditLogsDto":{"type":"object","properties":{"totalItems":{"type":"integer","format":"int32"},"totalPages":{"type":"integer","format":"int32"},"currentPage":{"type":"integer","format":"int32"},"itemsPerPage":{"type":"integer","format":"int32"},"items":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogDto"}}}},"ApiResponseDtoAuditStatisticsDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"$ref":"#/components/schemas/AuditStatisticsDto"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"AuditStatisticsDto":{"type":"object","properties":{"periodStart":{"type":"string","format":"date-time"},"periodEnd":{"type":"string","format":"date-time"},"totalEvents":{"type":"integer","format":"int64"},"successfulEvents":{"type":"integer","format":"int64"},"failedEvents":{"type":"integer","format":"int64"},"criticalEvents":{"type":"integer","format":"int64"},"securityEvents":{"type":"integer","format":"int64"},"eventsByType":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"eventsBySeverity":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"eventsByUser":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"eventsByClient":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"eventsByDay":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"topIpAddresses":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}},"averageExecutionTime":{"type":"number","format":"double"},"uniqueUsers":{"type":"integer","format":"int64"},"uniqueIpAddresses":{"type":"integer","format":"int64"}}},"ApiResponseDtoAuditLogDto":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"$ref":"#/components/schemas/AuditLogDto"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}},"ApiResponseDtoVoid":{"type":"object","properties":{"meta":{"$ref":"#/components/schemas/ApiMetaDto"},"data":{"type":"object"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorDto"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\"","scheme":"bearer","bearerFormat":"JWT"}}}}